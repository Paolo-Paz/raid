<!DOCTYPE html>
<html>
    <link rel="stylesheet" href="style.css">
    <div class="navigation">
      <!--Pages will be added in future update-->   
        <p align="right"><a href="home.html">Home</a></p>
        <p align="right"><a href="index.html"><b>Destiny 2</b></a></p>
        <p align="right"><a href="about.html">About us</a></p>
    </div>
    <div class="pagebody">
      <header class="header">R.A.I.D.</header>
        Username: <input type="text" name="userName" id="userName"><br>
        <button type="submit" onclick="startRaid();">Submit</button>
        <div class="characterlisting">
          <pre id="characters-1"></pre>
          <pre id="characters-2"></pre>
          <pre id="characters-3"></pre>
        </div>
        <script>
          function startRaid()
          {
            const user= document.getElementById('userName').value;
			      fetch(`/raid/${user}`)
        	    .then((r) => { return r.json(); })
        	    .then((response) => {
                let x = 0;
                while(response[x] != null || response[x] < 3)
                {
                  document.getElementById('characters-' + (x+1)).innerHTML = "Class: " + (JSON.stringify(response[x].classType, null, 2)).replace(/"/g, "") + "\n" + 
                  "Race: " + (JSON.stringify(response[x].raceType, null, 2)).replace(/"/g, "") + "\n" + 
                  "Gender: " + (JSON.stringify(response[x].gender, null, 2)).replace(/"/g, "") + "\n" + 
                  "Light Level: " + (JSON.stringify(response[x].lightLevel, null, 2)).replace(/"/g, "") + "\n" + 
                  (JSON.stringify(response[x].scourgeRaid, null, 2)).replace(/"/g, "") + "\n" + 
                  (JSON.stringify(response[x].lastWishRaid, null, 2)).replace(/"/g, "") + "\n" + 
                  (JSON.stringify(response[x].crownRaid, null, 2)).replace(/"/g, "") + "\n" + 
                  (JSON.stringify(response[x].eaterRaid, null, 2)).replace(/"/g, "") + "\n" +  
                  (JSON.stringify(response[x].eaterPRaid, null, 2)).replace(/"/g, "") + "\n" +  
                  (JSON.stringify(response[x].spireRaid, null, 2)).replace(/"/g, "") + "\n" +  
                  (JSON.stringify(response[x].spirePRaid, null, 2)).replace(/"/g, ""); + "\n" +
                  x++;
                }
            })
          }
        </script>
      </div>
</html>